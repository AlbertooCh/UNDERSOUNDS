{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/header.css' %}">
<style>
    /* Estilos para el menú desplegable */
    .profile-dropdown {
        position: relative;
        display: inline-block;
    }

    .profile-dropdown .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        min-width: 160px;
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.2);
        z-index: 1;
        top: 100%; /* Posición debajo del enlace "Perfil" */
        left: 0;
    }

    .profile-dropdown .dropdown-content a {
        color: #000;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
        text-align: left;
    }

    .profile-dropdown .dropdown-content a:hover {
        background-color: #f1f1f1;
    }

    .profile-dropdown.active .dropdown-content {
        display: block;
    }

    /* Estilos para los íconos */
    .icon-link {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .nav-icon {
        width: 24px;
        height: 24px;
        object-fit: contain;
    }
</style>
{% endblock %}

<header class="header">
    <div class="logo">
        <a href="{% url 'inicio' %}">
            <img src="{% static 'images/black_logo.png' %}" alt="Undersounds logo">
        </a>
    </div>

    <nav class="navbar">
        <ul class="nav-links">
            <li><a href="{% url 'inicio' %}">Inicio</a></li>
            <li><a href="{% url 'catalogo' %}">Catálogo</a></li>
            <li><a href="{% url 'novedades' %}">Novedades</a></li>
            <li><a href="{% url 'contacto' %}">Contacto</a></li>
            <li>
                <a href="{% url 'carrito' %}" class="icon-link">
                    <img src="{% static 'images/carrito.png' %}" alt="Carrito" class="nav-icon">
                </a>
            </li>
            <li class="profile-dropdown" id="profileDropdown">
                <a href="#" onclick="toggleDropdown(event)" class="icon-link">
                    <img src="{% static 'images/perfil.png' %}" alt="Perfil" class="nav-icon">
                </a>
                <div class="dropdown-content">
                    <a href="{% url 'perfil' %}">Mi perfil</a>
                    <a href="{% url 'historial_compras' %}">Compras</a>
                    <a href="{% url 'configuracion' %}">Configuración</a>
                </div>
            </li>
        </ul>
    </nav>
</header>

<script>
    // Función para mostrar/ocultar el menú desplegable
    function toggleDropdown(event) {
        event.preventDefault(); // Evita que el enlace redirija
        const dropdown = document.getElementById("profileDropdown");
        dropdown.classList.toggle("active"); // Alterna la clase "active"
    }

    // Cerrar el menú desplegable al hacer clic fuera de él
    document.addEventListener("click", function(event) {
        const dropdown = document.getElementById("profileDropdown");
        if (!dropdown.contains(event.target)) {
            dropdown.classList.remove("active");
        }
    });
</script>